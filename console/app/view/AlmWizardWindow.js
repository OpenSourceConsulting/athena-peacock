/*
 * File: app/view/AlmWizardWindow.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.AlmWizardWindow', {
    extend: 'Ext.window.Window',
    alias: 'widget.AlmWizardWindow',

    requires: [
        'Ext.toolbar.Toolbar',
        'Ext.toolbar.TextItem',
        'Ext.form.Label',
        'Ext.form.Panel',
        'Ext.form.FieldContainer',
        'Ext.XTemplate',
        'Ext.button.Button',
        'Ext.form.field.TextArea',
        'Ext.form.field.Hidden',
        'Ext.form.field.ComboBox',
        'Ext.form.FieldSet',
        'Ext.grid.Panel',
        'Ext.grid.View',
        'Ext.grid.column.Action',
        'Ext.grid.plugin.CellEditing',
        'Ext.grid.RowNumberer',
        'Ext.toolbar.Spacer',
        'Ext.form.field.Display'
    ],

    height: 600,
    id: 'AlmWizardWindow',
    itemId: 'AlmWizardWindow',
    width: 790,
    layout: 'fit',
    title: 'Project Wizard',
    modal: true,

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'panel',
                    height: 560,
                    width: 740,
                    layout: 'border',
                    header: false,
                    title: 'My Panel',
                    items: [
                        {
                            xtype: 'panel',
                            region: 'north',
                            height: 60,
                            id: 'almWizardTitlePanel',
                            itemId: 'almWizardTitlePanel',
                            header: false,
                            title: 'My Panel',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'tbtext',
                                            cls: 'wizard-label',
                                            componentCls: '',
                                            id: 'almWizardStepLabel0',
                                            itemId: 'almWizardStepLabel0',
                                            margin: '0 10 0 10',
                                            padding: '10 5 5 5',
                                            text: 'Step 1-1. Create Project',
                                            listeners: {
                                                render: {
                                                    fn: me.onAlmWizardStepLabel1Render,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'tbtext',
                                            cls: 'wizard-label',
                                            componentCls: '',
                                            id: 'almWizardStepLabel1',
                                            itemId: 'almWizardStepLabel1',
                                            margin: '0 10 0 10',
                                            padding: '10 5 5 5',
                                            text: 'Step 1-2. Create Project',
                                            listeners: {
                                                render: {
                                                    fn: me.onAlmWizardStepLabel1Render1,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'tbtext',
                                            cls: 'wizard-label',
                                            id: 'almWizardStepLabel2',
                                            itemId: 'almWizardStepLabel2',
                                            margin: '0 10 0 10',
                                            padding: '10 5 5 5',
                                            text: 'Step 2. Add Space',
                                            listeners: {
                                                render: {
                                                    fn: me.onAlmWizardStepLabel2Render,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'tbtext',
                                            cls: 'wizard-label',
                                            id: 'almWizardStepLabel3',
                                            itemId: 'almWizardStepLabel3',
                                            margin: '0 10 0 10',
                                            padding: '10 5 5 5',
                                            text: 'Step 3. Add User',
                                            listeners: {
                                                render: {
                                                    fn: me.onAlmWizardStepLabel3Render,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'tbtext',
                                            cls: 'wizard-label',
                                            id: 'almWizardStepLabel4',
                                            itemId: 'almWizardStepLabel4',
                                            margin: '0 10 0 10',
                                            padding: '10 3 5 3',
                                            text: 'Step 4. Review Project Wizard',
                                            listeners: {
                                                render: {
                                                    fn: me.onAlmWizardStepLabel4Render,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            region: 'center',
                            id: 'almWizardCardPanel',
                            itemId: 'almWizardCardPanel',
                            layout: 'card',
                            items: [
                                {
                                    xtype: 'panel',
                                    header: false,
                                    title: 'My Panel',
                                    items: [
                                        {
                                            xtype: 'label',
                                            margin: '0 0 0 20',
                                            style: 'font-size: 25px;',
                                            text: 'Step 1-1. Create Project'
                                        },
                                        {
                                            xtype: 'form',
                                            id: 'addProjectForm1',
                                            itemId: 'addProjectForm1',
                                            bodyPadding: 15,
                                            fieldDefaults: {
                                                msgTarget: 'side',
                                                labelWidth: 120
                                            },
                                            waitMsgTarget: true,
                                            items: [
                                                {
                                                    xtype: 'fieldcontainer',
                                                    defaults: {
                                                        flex: 1
                                                    },
                                                    fieldLabel: 'Label',
                                                    hideLabel: true,
                                                    layout: {
                                                        type: 'hbox',
                                                        align: 'middle'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'textfield',
                                                            flex: 5,
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Project Code',
                                                            msgTarget: 'under',
                                                            name: 'projectCode',
                                                            allowBlank: false,
                                                            vtype: 'template',
                                                            listeners: {
                                                                change: {
                                                                    fn: me.onTextfieldChange,
                                                                    scope: me
                                                                }
                                                            }
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            handler: function(button, e) {
                                                                var projectCode = Ext.getCmp("addProjectForm1").getForm().findField('projectCode').getValue();

                                                                if(projectCode == '') {
                                                                    Ext.Msg.alert('Error', 'Project Code를 입력하세요.');
                                                                }

                                                                Ext.Ajax.request({
                                                                    url: GLOBAL.urlPrefix + "alm/project/wizard/" + projectCode,
                                                                    method: 'GET',
                                                                    headers: { 'Content-Type': 'application/json' },
                                                                    waitMsg: 'Project Code Checking...',
                                                                    success: function (response) {

                                                                        var responseData = Ext.JSON.decode(response.responseText);

                                                                        if(responseData.success) {

                                                                            Ext.Msg.alert('Success', responseData.msg);
                                                                            Ext.getCmp("proejctCodeDuplYnField").setValue('Y');
                                                                        } else {

                                                                            Ext.Msg.alert('Failure', responseData.msg);

                                                                        }

                                                                    },
                                                                    failure: function (response) {
                                                                        var msg = Ext.JSON.decode(response.responseText).msg;

                                                                        Ext.Msg.alert('Failure', msg);
                                                                    }
                                                                });

                                                            },
                                                            flex: 1,
                                                            id: 'projectDuplBtn1',
                                                            itemId: 'projectDuplBtn',
                                                            margin: '0 0 0 10',
                                                            text: '중복확인'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    anchor: '100%',
                                                    padding: '',
                                                    afterLabelTextTpl: [
                                                        '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                    ],
                                                    fieldLabel: 'Project Name',
                                                    msgTarget: 'under',
                                                    name: 'projectName',
                                                    allowBlank: false
                                                },
                                                {
                                                    xtype: 'textareafield',
                                                    anchor: '100%',
                                                    afterLabelTextTpl: [
                                                        '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                    ],
                                                    fieldLabel: 'Project Description',
                                                    msgTarget: 'under',
                                                    name: 'projectDescription',
                                                    allowBlank: false
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    anchor: '100%',
                                                    margin: '0 0 15 0',
                                                    padding: '',
                                                    afterLabelTextTpl: [
                                                        '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                    ],
                                                    fieldLabel: 'Group Description',
                                                    msgTarget: 'under',
                                                    name: 'groupDescription',
                                                    allowBlank: false
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'hiddenfield',
                                            id: 'proejctCodeDuplYnField',
                                            itemId: 'proejctCodeDuplYnField',
                                            fieldLabel: 'Label'
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'bottom',
                                            ui: 'footer',
                                            layout: {
                                                type: 'hbox',
                                                pack: 'end'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(1);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 10 2 10',
                                                    text: 'Next'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        Ext.MessageBox.confirm('Confirm', '작업을 취소하시겠습니까?', function(btn){

                                                            if(btn == "yes"){
                                                                button.up("window").close();
                                                            }

                                                        });

                                                    },
                                                    margin: '0 50 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Cancel'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    autoScroll: true,
                                    header: false,
                                    title: 'My Panel',
                                    items: [
                                        {
                                            xtype: 'label',
                                            margin: '0 0 0 20',
                                            style: 'font-size: 25px;',
                                            text: 'Step 1-2. Create Project'
                                        },
                                        {
                                            xtype: 'form',
                                            id: 'addProjectForm2',
                                            itemId: 'addProjectForm2',
                                            width: 745,
                                            bodyPadding: '10 0 10 10',
                                            header: false,
                                            title: 'My Form',
                                            fieldDefaults: {
                                                msgTarget: 'side',
                                                labelWidth: 120
                                            },
                                            items: [
                                                {
                                                    xtype: 'combobox',
                                                    anchor: '100%',
                                                    margin: '0 0 15 0',
                                                    padding: '',
                                                    afterLabelTextTpl: [
                                                        '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                    ],
                                                    fieldLabel: 'Select Repository',
                                                    msgTarget: 'under',
                                                    name: 'repository',
                                                    allowBlank: false,
                                                    editable: false,
                                                    displayField: 'repositoryCode',
                                                    store: 'ComboAlmRepositoryStore',
                                                    valueField: 'repositoryCode'
                                                },
                                                {
                                                    xtype: 'combobox',
                                                    anchor: '100%',
                                                    afterLabelTextTpl: [
                                                        '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                    ],
                                                    fieldLabel: 'Project Type',
                                                    msgTarget: 'under',
                                                    name: 'type',
                                                    allowBlank: false,
                                                    editable: false,
                                                    store: 'ComboProjectTypeStore',
                                                    valueField: 'value',
                                                    listeners: {
                                                        change: {
                                                            fn: me.onComboboxChange,
                                                            scope: me
                                                        }
                                                    }
                                                },
                                                {
                                                    xtype: 'fieldset',
                                                    id: 'templateFieldSet1',
                                                    title: 'Server Template',
                                                    items: [
                                                        {
                                                            xtype: 'combobox',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Template',
                                                            msgTarget: 'under',
                                                            name: 'serverTemplate',
                                                            allowBlank: false,
                                                            editable: false,
                                                            store: 'ComboServerTemplateStore'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Group ID',
                                                            msgTarget: 'under',
                                                            name: 'serverGroupId',
                                                            allowBlank: false
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Artifact ID',
                                                            msgTarget: 'under',
                                                            name: 'serverArtifactId',
                                                            allowBlank: false
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Package',
                                                            msgTarget: 'under',
                                                            name: 'serverPackage',
                                                            allowBlank: false
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'form',
                                            id: 'addProjectForm3',
                                            itemId: 'addProjectForm3',
                                            width: 745,
                                            bodyPadding: '10 0 10 10',
                                            header: false,
                                            title: 'My Form',
                                            fieldDefaults: {
                                                msgTarget: 'side',
                                                labelWidth: 120
                                            },
                                            items: [
                                                {
                                                    xtype: 'fieldset',
                                                    hidden: true,
                                                    id: 'templateFieldSet2',
                                                    title: 'Mobile Template',
                                                    items: [
                                                        {
                                                            xtype: 'combobox',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Template',
                                                            msgTarget: 'under',
                                                            name: 'mobileTemplate',
                                                            allowBlank: false,
                                                            editable: false,
                                                            store: 'ComboServerTemplateStore'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Group ID',
                                                            msgTarget: 'under',
                                                            name: 'mobileGroupId',
                                                            allowBlank: false
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Artifact ID',
                                                            msgTarget: 'under',
                                                            name: 'mobileArtifactId',
                                                            allowBlank: false
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            anchor: '100%',
                                                            afterLabelTextTpl: [
                                                                '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>'
                                                            ],
                                                            fieldLabel: 'Package',
                                                            msgTarget: 'under',
                                                            name: 'mobilePackage',
                                                            allowBlank: false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'bottom',
                                            ui: 'footer',
                                            layout: {
                                                type: 'hbox',
                                                pack: 'end'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        //var activeItem = Ext.getCmp("almWizardCardPanel").getLayout().activeItem;

                                                        almConstants.me.goAlmWizardPanel(0);



                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Prev'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(2);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 10 2 10',
                                                    text: 'Next'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        Ext.MessageBox.confirm('Confirm', '작업을 취소하시겠습니까?', function(btn){

                                                            if(btn == "yes"){
                                                                button.up("window").close();
                                                            }

                                                        });

                                                    },
                                                    margin: '0 50 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Cancel'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    header: false,
                                    title: 'My Panel',
                                    items: [
                                        {
                                            xtype: 'label',
                                            height: 150,
                                            margin: '0 0 0 20',
                                            style: 'font-size:25px;',
                                            text: 'Step 2. Add Space'
                                        },
                                        {
                                            xtype: 'panel',
                                            height: 230,
                                            margin: '10 0 0 0',
                                            header: false,
                                            title: 'My Panel',
                                            items: [
                                                {
                                                    xtype: 'gridpanel',
                                                    height: 215,
                                                    id: 'wizardAddSpaceGrid',
                                                    itemId: 'wizardAddSpaceGrid',
                                                    margin: '10 0 0 0',
                                                    autoScroll: true,
                                                    header: false,
                                                    title: '',
                                                    columnLines: true,
                                                    forceFit: true,
                                                    store: 'AlmSpaceStore',
                                                    columns: [
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 100,
                                                            dataIndex: 'key',
                                                            text: 'Space'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 150,
                                                            dataIndex: 'name',
                                                            text: 'Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 60,
                                                            width: 80,
                                                            defaultWidth: 80,
                                                            dataIndex: 'type',
                                                            text: 'Type'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                if(value === ""){
                                                                    return "<font color='#999999'><i>Select Auth Type</i></font>";
                                                                }else{
                                                                    return value;
                                                                }
                                                            },
                                                            defaultWidth: 120,
                                                            dataIndex: 'authType',
                                                            emptyCellText: 'Select Auth Type',
                                                            text: 'Auth Type',
                                                            editor: {
                                                                xtype: 'combobox',
                                                                emptyText: 'Select Auth Type',
                                                                multiSelect: true,
                                                                store: 'AuthTypeComboStore',
                                                                valueField: 'value'
                                                            }
                                                        },
                                                        {
                                                            xtype: 'actioncolumn',
                                                            text: 'Add',
                                                            maxWidth: 60,
                                                            minWidth: 70,
                                                            style: 'text-align:left;',
                                                            width: 60,
                                                            defaultWidth: 60,
                                                            align: 'center',
                                                            menuText: '',
                                                            items: [
                                                                {
                                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {

                                                                        if(record.get("authType") !== ""){
                                                                            var spaceStore = Ext.getCmp("wizardSelectSpaceGrid").getStore();
                                                                            if(spaceStore.find('key', record.get('key')) > -1) {
                                                                                Ext.Msg.alert('Message', "이미 선택된 Space 정보입니다.");
                                                                                return;
                                                                            }


                                                                            spaceStore.insert(spaceStore.getCount(), record.copy());
                                                                        }else{
                                                                            Ext.MessageBox.alert('알림', 'auth type을 선택해주세요.');

                                                                        }

                                                                    },
                                                                    icon: 'resources/images/icons/add.png',
                                                                    iconCls: ''
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    plugins: [
                                                        Ext.create('Ext.grid.plugin.CellEditing', {

                                                        })
                                                    ],
                                                    dockedItems: [
                                                        {
                                                            xtype: 'toolbar',
                                                            dock: 'top',
                                                            height: 2
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'panel',
                                            height: 190,
                                            margin: '0 0 0 0',
                                            bodyStyle: 'border-top-width: 3px !important;',
                                            header: false,
                                            title: 'My Panel',
                                            items: [
                                                {
                                                    xtype: 'gridpanel',
                                                    height: 180,
                                                    id: 'wizardSelectSpaceGrid',
                                                    itemId: 'wizardSelectSpaceGrid',
                                                    autoScroll: true,
                                                    header: false,
                                                    title: 'My Grid Panel',
                                                    columnLines: true,
                                                    forceFit: true,
                                                    store: 'TempSpaceStore',
                                                    dockedItems: [
                                                        {
                                                            xtype: 'toolbar',
                                                            dock: 'top',
                                                            margin: '5 0 0 0',
                                                            items: [
                                                                {
                                                                    xtype: 'label',
                                                                    style: 'font-weight: bold;color: #666;',
                                                                    text: 'Selected Space'
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    columns: [
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 100,
                                                            dataIndex: 'key',
                                                            text: 'Space'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 150,
                                                            dataIndex: 'name',
                                                            text: 'Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 60,
                                                            width: 80,
                                                            defaultWidth: 80,
                                                            dataIndex: 'type',
                                                            text: 'Type'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            defaultWidth: 120,
                                                            dataIndex: 'authType',
                                                            text: 'Auth Type'
                                                        },
                                                        {
                                                            xtype: 'actioncolumn',
                                                            text: 'Delete',
                                                            maxWidth: 60,
                                                            minWidth: 70,
                                                            style: 'text-align:left;',
                                                            width: 60,
                                                            defaultWidth: 60,
                                                            align: 'center',
                                                            menuText: '',
                                                            items: [
                                                                {
                                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                                        view.getStore().removeAt(rowIndex);
                                                                    },
                                                                    icon: 'resources/images/icons/delete.png',
                                                                    iconCls: ''
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'bottom',
                                            ui: 'footer',
                                            layout: {
                                                type: 'hbox',
                                                pack: 'end'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(1);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Prev'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(3);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 10 2 10',
                                                    text: 'Next'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        Ext.MessageBox.confirm('Confirm', '작업을 취소하시겠습니까?', function(btn){

                                                            if(btn == "yes"){
                                                                button.up("window").close();
                                                            }

                                                        });

                                                    },
                                                    margin: '0 50 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Cancel'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    header: false,
                                    title: 'My Panel',
                                    items: [
                                        {
                                            xtype: 'label',
                                            height: 150,
                                            margin: '0 0 0 20',
                                            padding: '0 0 0 0',
                                            style: 'font-size:25px;',
                                            text: 'Step 3. Add User'
                                        },
                                        {
                                            xtype: 'panel',
                                            height: 220,
                                            margin: '20 0 0 0',
                                            bodyStyle: 'border-top-width: 1px !important;border-color:silver !important;',
                                            header: false,
                                            title: 'My Panel',
                                            items: [
                                                {
                                                    xtype: 'gridpanel',
                                                    height: 200,
                                                    id: 'wizardAddUserGrid',
                                                    itemId: 'wizardAddUserGrid',
                                                    autoScroll: true,
                                                    header: false,
                                                    title: '',
                                                    columnLines: true,
                                                    forceFit: true,
                                                    store: 'AlmUserStore',
                                                    columns: [
                                                        {
                                                            xtype: 'rownumberer',
                                                            width: 35
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 100,
                                                            dataIndex: 'userId',
                                                            text: 'User Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 150,
                                                            dataIndex: 'displayName',
                                                            text: 'Display Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 200,
                                                            dataIndex: 'emailAddress',
                                                            text: 'Email'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            dataIndex: 'active',
                                                            text: 'Active'
                                                        },
                                                        {
                                                            xtype: 'actioncolumn',
                                                            text: 'Add',
                                                            maxWidth: 60,
                                                            minWidth: 70,
                                                            style: 'text-align:left;',
                                                            width: 60,
                                                            defaultWidth: 60,
                                                            align: 'center',
                                                            menuText: '',
                                                            items: [
                                                                {
                                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                                        var userStore = Ext.getCmp("wizardSelectUserGrid").getStore();
                                                                        if(userStore.find('userId', record.get('userId')) > -1) {
                                                                            Ext.Msg.alert('Message', "이미 선택된 User 정보입니다.");
                                                                            return;
                                                                        }

                                                                        userStore.insert(userStore.getCount(), view.getStore().getAt(rowIndex));

                                                                    },
                                                                    icon: 'resources/images/icons/add.png',
                                                                    iconCls: ''
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    dockedItems: [
                                                        {
                                                            xtype: 'toolbar',
                                                            dock: 'top',
                                                            id: 'instancesToolbar6',
                                                            itemId: 'instancesToolbar2',
                                                            width: 150,
                                                            items: [
                                                                {
                                                                    xtype: 'textfield',
                                                                    id: 'inputWizardUserName',
                                                                    itemId: 'inputWizardUserName',
                                                                    fieldLabel: 'Filtering',
                                                                    labelWidth: 60,
                                                                    emptyText: 'Search User Name',
                                                                    enableKeyEvents: true
                                                                },
                                                                {
                                                                    xtype: 'tbspacer',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    handler: function(button, e) {
                                                                        almConstants.me.searchWizardUser(false, 'left');
                                                                    },
                                                                    iconMask: false,
                                                                    height: 30,
                                                                    width: 25,
                                                                    iconCls: 'x-toolbar-scroll-left'
                                                                },
                                                                {
                                                                    xtype: 'button',
                                                                    handler: function(button, e) {
                                                                        almConstants.me.searchWizardUser(false, 'right');
                                                                    },
                                                                    iconMask: false,
                                                                    height: 30,
                                                                    width: 25,
                                                                    iconCls: 'x-toolbar-scroll-right'
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'panel',
                                            height: 190,
                                            margin: '',
                                            bodyStyle: 'border-top-width: 3px !important;',
                                            header: false,
                                            title: 'My Panel',
                                            items: [
                                                {
                                                    xtype: 'gridpanel',
                                                    height: 200,
                                                    id: 'wizardSelectUserGrid',
                                                    itemId: 'wizardSelectUserGrid',
                                                    autoScroll: true,
                                                    header: false,
                                                    title: '',
                                                    columnLines: true,
                                                    forceFit: true,
                                                    store: 'TempUserStore',
                                                    dockedItems: [
                                                        {
                                                            xtype: 'toolbar',
                                                            dock: 'top',
                                                            margin: '5 0 0 0',
                                                            items: [
                                                                {
                                                                    xtype: 'label',
                                                                    style: 'font-weight: bold;color: #666;',
                                                                    text: 'Selected User'
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    columns: [
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 100,
                                                            dataIndex: 'userId',
                                                            text: 'User Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 150,
                                                            dataIndex: 'displayName',
                                                            text: 'Display Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            minWidth: 200,
                                                            dataIndex: 'emailAddress',
                                                            text: 'Email'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            dataIndex: 'active',
                                                            text: 'Active'
                                                        },
                                                        {
                                                            xtype: 'actioncolumn',
                                                            text: 'Delete',
                                                            maxWidth: 60,
                                                            minWidth: 70,
                                                            style: 'text-align:left;',
                                                            width: 60,
                                                            defaultWidth: 60,
                                                            align: 'center',
                                                            menuText: '',
                                                            items: [
                                                                {
                                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                                        view.getStore().removeAt(rowIndex);
                                                                    },
                                                                    icon: 'resources/images/icons/delete.png',
                                                                    iconCls: ''
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'bottom',
                                            ui: 'footer',
                                            layout: {
                                                type: 'hbox',
                                                pack: 'end'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(2);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Prev'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        almConstants.me.goAlmWizardPanel(4);
                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 10 2 10',
                                                    text: 'Next'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        Ext.MessageBox.confirm('Confirm', '작업을 취소하시겠습니까?', function(btn){

                                                            if(btn == "yes"){
                                                                button.up("window").close();
                                                            }

                                                        });

                                                    },
                                                    margin: '0 50 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Cancel'
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    header: false,
                                    title: 'My Panel',
                                    items: [
                                        {
                                            xtype: 'label',
                                            height: 150,
                                            margin: '0 0 0 20',
                                            style: 'font-size:25px;',
                                            text: 'Step 4. Review Project Wizard'
                                        },
                                        {
                                            xtype: 'panel',
                                            height: 432,
                                            margin: '5 0 0 0',
                                            autoScroll: true,
                                            header: false,
                                            title: 'My Panel',
                                            items: [
                                                {
                                                    xtype: 'form',
                                                    frame: true,
                                                    id: 'reviewProjectForm',
                                                    itemId: 'reviewProjectForm',
                                                    margin: 10,
                                                    padding: '',
                                                    defaults: {
                                                        border: false,
                                                        xtype: 'panel',
                                                        flex: 1,
                                                        layout: 'anchor'
                                                    },
                                                    bodyPadding: 10,
                                                    bodyStyle: 'padding:5px 5px 0',
                                                    title: 'Project Information',
                                                    fieldDefaults: {
                                                        msgTarget: 'side',
                                                        margin: '0 10',
                                                        readOnly: true,
                                                        labelStyle: 'font-weight: bold;',
                                                        labelSeparator: ' :'
                                                    },
                                                    waitMsgTarget: 'instDescForm',
                                                    items: [
                                                        {
                                                            xtype: 'displayfield',
                                                            padding: 10,
                                                            fieldLabel: 'Project Name',
                                                            labelWidth: 140,
                                                            name: 'projectName'
                                                        },
                                                        {
                                                            xtype: 'displayfield',
                                                            padding: 10,
                                                            fieldLabel: 'Project Description',
                                                            labelWidth: 140,
                                                            name: 'projectDescription'
                                                        },
                                                        {
                                                            xtype: 'displayfield',
                                                            padding: 10,
                                                            fieldLabel: 'Group Description',
                                                            labelWidth: 140,
                                                            name: 'groupDescription'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'form',
                                                    frame: true,
                                                    id: 'reviewProjectForm2',
                                                    itemId: 'reviewProjectForm2',
                                                    margin: 10,
                                                    padding: '',
                                                    defaults: {
                                                        xtype: 'panel',
                                                        flex: 1,
                                                        layout: 'anchor'
                                                    },
                                                    bodyPadding: 10,
                                                    bodyStyle: 'padding:5px 5px 0',
                                                    title: 'Project Type',
                                                    fieldDefaults: {
                                                        msgTarget: 'side',
                                                        margin: '0 10',
                                                        readOnly: true,
                                                        labelStyle: 'font-weight: bold;',
                                                        labelSeparator: ' :'
                                                    },
                                                    waitMsgTarget: 'instDescForm',
                                                    items: [
                                                        {
                                                            xtype: 'displayfield',
                                                            padding: 10,
                                                            fieldLabel: 'Select Repository',
                                                            labelWidth: 140,
                                                            name: 'repository'
                                                        },
                                                        {
                                                            xtype: 'displayfield',
                                                            padding: 10,
                                                            fieldLabel: 'Project Type',
                                                            labelWidth: 140,
                                                            name: 'type'
                                                        },
                                                        {
                                                            xtype: 'fieldset',
                                                            title: 'Server Template',
                                                            items: [
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'Template',
                                                                    labelWidth: 140,
                                                                    name: 'serverTemplate'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'GroupID',
                                                                    labelWidth: 140,
                                                                    name: 'serverGroupId'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'ArtifactID',
                                                                    labelWidth: 140,
                                                                    name: 'serverArtifactId'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'Package',
                                                                    labelWidth: 140,
                                                                    name: 'serverPackage'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'fieldset',
                                                            hidden: true,
                                                            id: 'reviewMTemplate',
                                                            title: 'Mobile Template',
                                                            items: [
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'Template',
                                                                    labelWidth: 140,
                                                                    name: 'mobileTemplate'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'GroupID',
                                                                    labelWidth: 140,
                                                                    name: 'mobileGroupId'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'ArtifactID',
                                                                    labelWidth: 140,
                                                                    name: 'mobileArtifactId'
                                                                },
                                                                {
                                                                    xtype: 'displayfield',
                                                                    padding: 10,
                                                                    fieldLabel: 'Package',
                                                                    labelWidth: 140,
                                                                    name: 'mobilePackage'
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridpanel',
                                                    frame: true,
                                                    height: 180,
                                                    margin: 10,
                                                    autoScroll: true,
                                                    title: 'Space Information',
                                                    columnLines: true,
                                                    emptyText: '<div style=\'text-align:center;\'>No Selected Data</div>',
                                                    forceFit: false,
                                                    store: 'TempSpaceStore',
                                                    columns: [
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 150,
                                                            dataIndex: 'key',
                                                            text: 'Space'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 250,
                                                            dataIndex: 'name',
                                                            text: 'Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 80,
                                                            dataIndex: 'type',
                                                            text: 'Type'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 220,
                                                            dataIndex: 'authType',
                                                            text: 'Auth Type'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'gridpanel',
                                                    frame: true,
                                                    height: 200,
                                                    margin: 10,
                                                    autoScroll: true,
                                                    title: 'User Information',
                                                    columnLines: true,
                                                    emptyText: '<div style=\'text-align:center;\'>No Selected Data</div>',
                                                    forceFit: false,
                                                    store: 'TempUserStore',
                                                    columns: [
                                                        {
                                                            xtype: 'rownumberer',
                                                            width: 50,
                                                            text: 'No'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 150,
                                                            dataIndex: 'userId',
                                                            text: 'User Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 250,
                                                            dataIndex: 'displayName',
                                                            text: 'Display Name'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            width: 250,
                                                            dataIndex: 'emailAddress',
                                                            text: 'Email'
                                                        },
                                                        {
                                                            xtype: 'gridcolumn',
                                                            dataIndex: 'active',
                                                            text: 'Active'
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'toolbar',
                                            dock: 'bottom',
                                            ui: 'footer',
                                            layout: {
                                                type: 'hbox',
                                                pack: 'end'
                                            },
                                            items: [
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        var projectForm = Ext.getCmp("addProjectForm1");

                                                        if(projectForm.isValid()) {

                                                            var wizardData = {};

                                                            var spaceStore = Ext.getCmp("wizardSelectSpaceGrid").getStore();
                                                            var userStore = Ext.getCmp("wizardSelectUserGrid").getStore();

                                                            wizardData.project = projectForm.getForm().getFieldValues();
                                                            wizardData.template = Ext.getCmp("addProjectForm2").getForm().getFieldValues();

                                                            if(spaceStore.getCount() > 0 ) {

                                                                var spaceItems = [];
                                                                Ext.each(Ext.pluck(spaceStore.data.items, 'data'), function(item) {
                                                                    var spaceItem = {};
                                                                    spaceItem.mappingCode = item.key;
                                                                    spaceItem.mappingType = "10";
                                                                    spaceItem.mappingPermission = item.authType;

                                                                    spaceItems.push(spaceItem);
                                                                });

                                                                wizardData.confluence = spaceItems;
                                                            }

                                                            if(userStore.getCount() > 0 ) {
                                                                wizardData.users = Ext.pluck(userStore.data.items, 'data');
                                                            }

                                                            Ext.Ajax.request({
                                                                url: GLOBAL.urlPrefix + "alm/project/wizard",
                                                                method: 'POST',
                                                                headers: { 'Content-Type': 'application/json' },
                                                                waitMsg: 'Create Project...',
                                                                jsonData: wizardData,
                                                                success: function (response) {

                                                                    var responseData = Ext.JSON.decode(response.responseText);

                                                                    if(responseData.success) {

                                                                        Ext.Msg.alert('Success', responseData.msg);

                                                                        Ext.getCmp('almProjectGrid').getStore().reload();
                                                                        projectForm.up('window').close();

                                                                    } else {

                                                                        Ext.Msg.alert('Failure', responseData.msg);

                                                                    }

                                                                },
                                                                failure: function (response) {
                                                                    var msg = Ext.JSON.decode(response.responseText).msg;

                                                                    Ext.Msg.alert('Failure', msg);
                                                                }
                                                            });

                                                        }

                                                    },
                                                    margin: '0 15 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Create Project'
                                                },
                                                {
                                                    xtype: 'button',
                                                    handler: function(button, e) {
                                                        Ext.MessageBox.confirm('Confirm', '작업을 취소하시겠습니까?', function(btn){

                                                            if(btn == "yes"){
                                                                button.up("window").close();
                                                            }

                                                        });

                                                    },
                                                    margin: '0 50 0 0',
                                                    padding: '2 5 2 5',
                                                    text: 'Cancel'
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onAlmWizardStepLabel1Render: function(component, eOpts) {
        component.getEl().on({
            click: function(el){
                almConstants.me.goAlmWizardPanel(0);
            },
            scope: component
        });

    },

    onAlmWizardStepLabel1Render1: function(component, eOpts) {
        component.getEl().on({
            click: function(el){
                almConstants.me.goAlmWizardPanel(1);
            },
            scope: component
        });

    },

    onAlmWizardStepLabel2Render: function(component, eOpts) {
        component.getEl().on({
            click: function(el){
                almConstants.me.goAlmWizardPanel(2);
            },
            scope: component
        });

    },

    onAlmWizardStepLabel3Render: function(component, eOpts) {
        component.getEl().on({
            click: function(el){
                almConstants.me.goAlmWizardPanel(3);
            },
            scope: component
        });

    },

    onAlmWizardStepLabel4Render: function(component, eOpts) {
        component.getEl().on({
            click: function(el){
                almConstants.me.goAlmWizardPanel(4);
            },
            scope: component
        });

    },

    onTextfieldChange: function(field, newValue, oldValue, eOpts) {
        if(Ext.getCmp("proejctCodeDuplYnField") != null){
            Ext.getCmp("proejctCodeDuplYnField").setValue("");
        }
    },

    onComboboxChange: function(field, newValue, oldValue, eOpts) {

        if(newValue ===  almConstants.mProject){
            Ext.getCmp("templateFieldSet2").show();
        }else{
            Ext.getCmp("templateFieldSet2").hide();
        }
    }

});