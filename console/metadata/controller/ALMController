{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ALMController"
    },
    "designerId": "073aff72-9093-4a46-9a88-85438b36ed4e",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "application"
                ],
                "fn": "init",
                "implHandler": [
                    "//ALM Menu Config Setting",
                    "",
                    "var alm = this;",
                    "",
                    "var almUserGridContextMenu = new Ext.menu.Menu({",
                    "    items:",
                    "    [",
                    "        { text: 'Edit',",
                    "         handler: function() {",
                    "             alm.showAlmUserWindow();",
                    "         }",
                    "        },",
                    "        { text: 'Delete',",
                    "         handler: function() {",
                    "             alert('delete');",
                    "         }",
                    "        },",
                    "        { text: 'Clone User',",
                    "         handler: function() {",
                    "             alm.showAlmUserWindow();",
                    "         }",
                    "        }",
                    "    ]",
                    "",
                    "});",
                    "",
                    "var almGroupGridContextMenu = new Ext.menu.Menu({",
                    "    items:",
                    "    [",
                    "        { text: 'Edit',",
                    "         handler: function() {",
                    "             alm.showAlmGroupWindow();",
                    "         }",
                    "        },",
                    "        { text: 'Delete',",
                    "         handler: function() {",
                    "             alert('delete');",
                    "         }",
                    "        }",
                    "    ]",
                    "",
                    "});",
                    "",
                    "//ALM Menu Constants",
                    "Ext.define('almConstants', {",
                    "    singleton: true,",
                    "    me : alm,",
                    "    userContextMenu: almUserGridContextMenu,",
                    "    groupContextMenu: almGroupGridContextMenu,",
                    "    selectRow : null",
                    "});",
                    ""
                ]
            },
            "designerId": "f5879386-c0c1-445c-b561-66a682cd0aa2"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almProjectGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onAlmProjectGridCellClick",
                "implHandler": [
                    "//ALM Project Grid Item Click",
                    "",
                    "if(almConstants.selectRow == null || almConstants.selectRow.get(\"projectId\") != record.get(\"projectId\")) {",
                    "",
                    "    almConstants.selectRow = record;",
                    "",
                    "    this.selectAlmProjectGrid();",
                    "}"
                ],
                "name": "cellclick",
                "scope": "me"
            },
            "designerId": "c31ec588-ca48-4ff2-8254-6982069d9bf5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almUserGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onAlmUserGridCellClick",
                "implHandler": [
                    "//ALM User Grid Item Click",
                    "",
                    "if(almConstants.selectRow == null || almConstants.selectRow.get(\"userId\") != record.get(\"userId\")) {",
                    "",
                    "    almConstants.selectRow = record;",
                    "",
                    "    this.selectAlmUserGrid();",
                    "}"
                ],
                "name": "cellclick",
                "scope": "me"
            },
            "designerId": "ceb02312-8da8-4c3c-a92a-fd3b1ad89e92"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almUserGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onAlmUserGridBeforeItemContextMenu",
                "implHandler": [
                    "//ALM User Grid Right Click Menu 호출",
                    "",
                    "var position = e.getXY();",
                    "e.stopEvent();",
                    "",
                    "almConstants.selectRow = record;",
                    "",
                    "almConstants.userContextMenu.showAt(position);",
                    "",
                    ""
                ],
                "name": "beforeitemcontextmenu",
                "scope": "me"
            },
            "designerId": "de4acbc9-116a-4ef8-90ae-86912e55edf9"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almGroupGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onAlmGroupGridBeforeItemContextMenu",
                "implHandler": [
                    "//ALM Group Grid Right Click Menu 호출",
                    "",
                    "var position = e.getXY();",
                    "e.stopEvent();",
                    "",
                    "almConstants.selectRow = record;",
                    "",
                    "almConstants.groupContextMenu.showAt(position);",
                    "",
                    ""
                ],
                "name": "beforeitemcontextmenu",
                "scope": "me"
            },
            "designerId": "e28a2f99-9c9c-4644-953c-45b89c4348b7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "init"
                ],
                "fn": "searchAlmProject",
                "implHandler": [
                    "",
                    "if(init) {",
                    "",
                    "    Ext.getCmp(\"almTabPanel\").setActiveTab(0);",
                    "    Ext.getCmp(\"almProjectGrid\").reconfigure(Ext.getCmp(\"almProjectGrid\").store, Ext.getCmp(\"almProjectGrid\").initialConfig.columns);",
                    "}",
                    "",
                    "almConstants.selectRow = null;",
                    "",
                    "Ext.getCmp(\"almProjectGrid\").getStore().load();",
                    "",
                    "var detailPanel = Ext.getCmp(\"almProjectDetailPanel\");",
                    "detailPanel.layout.setActiveItem(0);"
                ]
            },
            "designerId": "36b632c2-c9e4-42ae-9e1b-214b669be119"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "init"
                ],
                "fn": "searchAlmUser",
                "implHandler": [
                    "",
                    "if(init) {",
                    "    Ext.getCmp(\"almUserGrid\").reconfigure(Ext.getCmp(\"almUserGrid\").store, Ext.getCmp(\"almUserGrid\").initialConfig.columns);",
                    "}",
                    "",
                    "almConstants.selectRow = null;",
                    "",
                    "Ext.getCmp(\"almUserGrid\").getStore().load();",
                    "",
                    "var detailPanel = Ext.getCmp(\"almUserDetailPanel\");",
                    "detailPanel.layout.setActiveItem(0);"
                ]
            },
            "designerId": "cb1355f9-c358-4732-9f1c-3ebf3bd77ad2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "selectAlmProjectGrid",
                "implHandler": [
                    "",
                    "var userDetailPanel = Ext.getCmp(\"almProjectDetailPanel\");",
                    "userDetailPanel.layout.setActiveItem(1);",
                    "",
                    "Ext.getCmp(\"projectTabPanel\").setActiveTab(0);",
                    "",
                    "//Project Data Loading",
                    " ",
                    "var projectForm = Ext.getCmp(\"almProjectForm\");",
                    "",
                    "projectForm.getForm().reset();",
                    "",
                    "projectForm.getForm().waitMsgTarget = projectForm.getEl();",
                    "",
                    "projectForm.getForm().load({",
                    "    url : GLOBAL.urlPrefix + \"alm/project/\" + almConstants.selectRow.get(\"projectId\")",
                    "    ,method : 'GET'",
                    "    ,waitMsg:'Loading...'",
                    "});",
                    "",
                    "Ext.getCmp(\"almProjectTitleLabel\").setText(\"<h2>\"+almConstants.selectRow.get(\"projectName\")+\"</h2>\", false);"
                ]
            },
            "designerId": "b0999279-97f1-4ffc-9040-a0ba5cc3605b"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "selectAlmUserGrid",
                "implHandler": [
                    "",
                    "var userDetailPanel = Ext.getCmp(\"almUserDetailPanel\");",
                    "userDetailPanel.layout.setActiveItem(1);",
                    "",
                    "//User Data Loading",
                    "",
                    "var userForm = Ext.getCmp(\"almUserForm\");",
                    "",
                    "userForm.getForm().reset();",
                    "",
                    "userForm.getForm().waitMsgTarget = userForm.getEl();",
                    "//alert(almConstants.selectRow.get(\"username\"))",
                    "userForm.getForm().load({",
                    "     /*params : {",
                    "        username : almConstants.selectRow.get(\"username\")",
                    "    }",
                    "    ,*/url : GLOBAL.urlPrefix + \"alm/usermanagement/\" + almConstants.selectRow.get(\"userId\")",
                    "    ,method : 'GET'",
                    "    ,waitMsg:'Loading...'",
                    "});",
                    "",
                    "Ext.getCmp(\"almUserTitleLabel\").setText(\"<h2>\"+almConstants.selectRow.get(\"displayName\")+\"</h2>\", false);"
                ]
            },
            "designerId": "d00ae31c-473a-4594-856a-8679f6280b12"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showAlmUserWindow",
                "implHandler": [
                    "var almUserWindow = Ext.create(\"widget.almUserWindow\");",
                    "",
                    "almUserWindow.show();"
                ]
            },
            "designerId": "eeda4dc7-9b9d-46ab-ace8-304a105420c0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showAlmGroupWindow",
                "implHandler": [
                    "var almGroupWindow = Ext.create(\"widget.almGroupWindow\");",
                    "",
                    "almGroupWindow.show();"
                ]
            },
            "designerId": "6b3488ff-15ca-48d3-8023-ce87c6dcf516"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almTabPanel",
                "designer|targetType": "Ext.tab.Panel",
                "fn": "onAlmTabPanelTabChange",
                "implHandler": [
                    "if(newCard.title == \"Project\"){",
                    "",
                    "    this.searchAlmProject();",
                    "",
                    "} else if(newCard.title == \"User\"){",
                    "",
                    "    this.searchAlmUser();",
                    "",
                    "} else if(newCard.title == \"Group\"){",
                    "",
                    "    almConstants.selectRow = null;",
                    "",
                    "    Ext.getCmp(\"almGroupGrid\").getStore().load();",
                    "",
                    "    var detailPanel = Ext.getCmp(\"almGroupDetailPanel\");",
                    "    detailPanel.layout.setActiveItem(0);",
                    "",
                    "}"
                ],
                "name": "tabchange",
                "scope": "me"
            },
            "designerId": "3b8139f0-4dfc-4b5a-b6c4-e6d9db55c06a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#projectTabPanel",
                "designer|targetType": "Ext.tab.Panel",
                "fn": "onProjectTabPanelTabChange",
                "implHandler": [
                    "if(newCard.title == \"Summary\"){",
                    "",
                    "    this.selectAlmProjectGrid();",
                    "",
                    "} else if(newCard.title == \"User\"){",
                    "",
                    "    var grid = Ext.getCmp(\"almProjectUserGrid\");",
                    "",
                    "    var store = Ext.create('Ext.data.Store', {",
                    "        alias: 'store.ModeStore',",
                    "        autoLoad: false,",
                    "        fields: [{",
                    "            name: 'name',",
                    "            type: 'string'",
                    "        }, {",
                    "            name: 'text',",
                    "            type: 'string'",
                    "        }],",
                    "        data: [",
                    "      { name : \"A468827\", text : \"Remove User from Project\"},",
                    "      { name : \"BP08882\", text : \"Remove User from Project\"}",
                    "    ]",
                    "    });",
                    "",
                    "    grid.getView().bindStore(store);",
                    "",
                    "} else if(newCard.title == \"Group\"){",
                    "",
                    "    var grid = Ext.getCmp(\"almProjectGroupGrid\");",
                    "",
                    "    var store = Ext.create('Ext.data.Store', {",
                    "        alias: 'store.ModeStore',",
                    "        autoLoad: false,",
                    "        fields: [{",
                    "            name: 'name',",
                    "            type: 'string'",
                    "        }, {",
                    "            name: 'text',",
                    "            type: 'string'",
                    "        }],",
                    "        data: [",
                    "      { name : \"A468827\", text : \"Remove Group from Project\"},",
                    "      { name : \"BP08882\", text : \"Remove Group from Project\"}",
                    "    ]",
                    "    });",
                    "",
                    "    grid.getView().bindStore(store);",
                    "",
                    "} else {",
                    "",
                    "    var grid = Ext.getCmp(\"almProjectConfluenceGrid\");",
                    "",
                    "    var store = Ext.create('Ext.data.Store', {",
                    "        alias: 'store.ModeStore',",
                    "        autoLoad: false,",
                    "        fields: [{",
                    "            name: 'name',",
                    "            type: 'string'",
                    "        }, {",
                    "            name: 'text',",
                    "            type: 'string'",
                    "        }],",
                    "        data: [",
                    "      { name : \"Blank\", text : \"Remove Space from Project\"},",
                    "      { name : \"S\", text : \"Remove Space from Project\"}",
                    "    ]",
                    "    });",
                    "",
                    "    grid.getView().bindStore(store);",
                    "",
                    "}"
                ],
                "name": "tabchange",
                "scope": "me"
            },
            "designerId": "cfca724b-ba59-447c-9d66-9320b08c2322"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#almGroupGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onAlmGroupGridCellClick",
                "implHandler": [
                    "//ALM Project Grid Item Click",
                    "",
                    "if(almConstants.selectRow == null || almConstants.selectRow.get(\"name\") != record.get(\"name\")) {",
                    "",
                    "    almConstants.selectRow = record;",
                    "",
                    "        ",
                    "    var groupDetailPanel = Ext.getCmp(\"almGroupDetailPanel\");",
                    "    groupDetailPanel.layout.setActiveItem(1);",
                    "    ",
                    "    //User Data Loading",
                    "    ",
                    "    var groupForm = Ext.getCmp(\"almGroupForm\");",
                    "    ",
                    "    groupForm.getForm().reset();",
                    "    ",
                    "    groupForm.getForm().waitMsgTarget = groupForm.getEl();",
                    "    //alert(almConstants.selectRow.get(\"username\"))",
                    "    groupForm.getForm().load({",
                    "         /*params : {",
                    "            username : almConstants.selectRow.get(\"username\")",
                    "        }",
                    "        ,*/url : GLOBAL.urlPrefix + \"alm/groupmanagement/\" + almConstants.selectRow.get(\"name\")",
                    "        ,method : 'GET'",
                    "        ,waitMsg:'Loading...'",
                    "    });",
                    "    ",
                    "    Ext.getCmp(\"almGroupTitleLabel\").setText(\"<h2>\"+almConstants.selectRow.get(\"name\")+\"</h2>\", false);",
                    "    ",
                    "    ",
                    "    var grid = Ext.getCmp(\"almGroupUserGrid\");",
                    "",
                    "    var store = Ext.create('Ext.data.Store', {",
                    "        alias: 'store.ModeStore',",
                    "        autoLoad: false,",
                    "        fields: [{",
                    "            name: 'name',",
                    "            type: 'string'",
                    "        }, {",
                    "            name: 'text',",
                    "            type: 'string'",
                    "        }],",
                    "        data: [",
                    "      { name : \"A468827\", text : \"Remove User from Group\"},",
                    "      { name : \"BP08882\", text : \"Remove User from Group\"}",
                    "    ]",
                    "    });",
                    "",
                    "    grid.getView().bindStore(store);",
                    "",
                    "}"
                ],
                "name": "cellclick",
                "scope": "me"
            },
            "designerId": "6e9178d8-bb05-42d0-abcc-4e5d8eb512a9"
        }
    ]
}