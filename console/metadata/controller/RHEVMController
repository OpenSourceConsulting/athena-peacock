{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "RHEVMController"
    },
    "designerId": "82c2dbac-191d-44f3-81e3-717d31ea95c9",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#hypervisorGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onHypervisorGridSelect",
                "implHandler": [
                    "//RHEVM Grid Item Click",
                    "",
                    "if(cellIndex > 8) {",
                    "    //Action Column 예외처리",
                    "    return;",
                    "}",
                    "",
                    "if(RHEVMConstants.selectRow == null || RHEVMConstants.selectRow.get(\"hypervisorId\") != record.get(\"hypervisorId\")) {",
                    "",
                    "    RHEVMConstants.selectRow = record;",
                    "",
                    "    this.selectHypervisorGrid();",
                    "}"
                ],
                "name": "cellclick",
                "scope": "me"
            },
            "designerId": "3f6ceed4-9073-4b9e-a8cc-bb6f9c0f953d"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmTabPanel",
                "designer|targetType": "Ext.tab.Panel",
                "fn": "onRhevmTabPanelTabChange",
                "implHandler": [
                    "",
                    "//RHEVM Tab Change",
                    "",
                    "RHEVMConstants.page = 1;",
                    "",
                    "if(newCard.title == \"Templates\"){",
                    "",
                    "    Ext.getCmp(\"searchRhevmTemplateName\").setValue(\"\");",
                    "    Ext.getCmp(\"vmPagingLeftBtn\").setDisabled(false);",
                    "    Ext.getCmp(\"vmPagingLabel\").setText(\"0\");",
                    "    Ext.getCmp(\"vmPagingRightBtn\").setDisabled(false);",
                    "",
                    "    Ext.getCmp(\"rhevmTemplateGrid\").reconfigure(Ext.getCmp(\"rhevmTemplateGrid\").store, Ext.getCmp(\"rhevmTemplateGrid\").initialConfig.columns);",
                    "",
                    "    this.searchRhevmChildGrid(\"rhevmTemplateGrid\");",
                    "",
                    "} else {",
                    "",
                    "    Ext.getCmp(\"searchRhevmVMName\").setValue(\"\");",
                    "    Ext.getCmp(\"templatePagingLeftBtn\").setDisabled(false);",
                    "    Ext.getCmp(\"templatePagingLabel\").setText(\"0\");",
                    "    Ext.getCmp(\"templatePagingRightBtn\").setDisabled(false);",
                    "    Ext.getCmp(\"rhevmVMGrid\").reconfigure(Ext.getCmp(\"rhevmVMGrid\").store, Ext.getCmp(\"rhevmVMGrid\").initialConfig.columns);",
                    "",
                    "    this.searchRhevmChildGrid(\"rhevmVMGrid\");",
                    "",
                    "}"
                ],
                "name": "tabchange",
                "scope": "me"
            },
            "designerId": "165a1414-12b8-4947-91aa-c92cfdc5a987"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmVMGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onRhevmVMGridItemClick",
                "implHandler": [
                    "",
                    "//RHEVM VM 상세 조회",
                    "",
                    "if(RHEVMConstants.childSelectRow == null || RHEVMConstants.childSelectRow.get(\"vmId\") != record.get(\"vmId\")) {",
                    "",
                    "    RHEVMConstants.childSelectRow = record;",
                    "",
                    "    this.selectRhevmChildGrid('vm');",
                    "}"
                ],
                "name": "itemclick",
                "scope": "me"
            },
            "designerId": "3e5fd3cd-6bc4-4809-a35c-05e4ae797829"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "application"
                ],
                "fn": "init",
                "implHandler": [
                    "var rhevm = this;",
                    "",
                    "var rhevmGridContextMenu = new Ext.menu.Menu({",
                    "    items:",
                    "    [",
                    "        { text: 'Edit',",
                    "         handler: function() {",
                    "             rhevm.showRhevmWindow('edit');",
                    "         }",
                    "        },",
                    "        { text: 'Delete',",
                    "         handler: function() {",
                    "             rhevm.deleteRhevm();",
                    "         }",
                    "        }",
                    "    ]",
                    "",
                    "});",
                    "",
                    "var rhevmVMGridContextMenu = new Ext.menu.Menu({",
                    "    items:",
                    "    [",
                    "        { text: 'Start',",
                    "         handler: function() {",
                    "             rhevm.controlVMStatus('Start');",
                    "         }",
                    "        },",
                    "        { text: 'Stop',",
                    "         handler: function() {",
                    "             rhevm.controlVMStatus('Stop');",
                    "         }",
                    "        },",
                    "        { text: 'Shutdown',",
                    "         handler: function() {",
                    "             rhevm.controlVMStatus('Shutdown');",
                    "         }",
                    "        },",
                    "        { text: 'Remove',",
                    "         handler: function() {",
                    "             rhevm.controlVMStatus('Remove');",
                    "         }",
                    "        },",
                    "        { text: 'Export',",
                    "         handler: function() {",
                    "             rhevm.controlVMStatus('Export');",
                    "         }",
                    "        },",
                    "        { text: 'Make Template',",
                    "          handler: function() {",
                    "             rhevm.showTemplateWindow();",
                    "          }",
                    "        }",
                    "    ]",
                    "",
                    "});",
                    "",
                    "var rhevmTemplateGridContextMenu = new Ext.menu.Menu({",
                    "    items:",
                    "    [",
                    "        { text: 'Instance Create',",
                    "         handler: function() {",
                    "             rhevm.popCreateInstance();",
                    "         }",
                    "        },",
                    "        { text: 'Remove',",
                    "         handler: function() {",
                    "             rhevm.deleteTemplate();",
                    "         }",
                    "        }",
                    "    ]",
                    "",
                    "});",
                    "",
                    "//RHEVM Menu Constants",
                    "Ext.define('RHEVMConstants', {",
                    "    singleton: true,",
                    "    me : rhevm,",
                    "    rhevmContextMenu: rhevmGridContextMenu,",
                    "    rhevmVMContextMenu: rhevmVMGridContextMenu,",
                    "    rhevmTemplateContextMenu: rhevmTemplateGridContextMenu,",
                    "    selectRow : null,",
                    "    actionRow : null,",
                    "    childSelectRow : null,",
                    "    childActionRow : null,",
                    "    writeMenuAuth : false,",
                    "    page : 0",
                    "});",
                    ""
                ]
            },
            "designerId": "8c90bd08-5bc3-487e-a028-e44d03fb7906"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmVMGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onRhevmVMGridBeforeItemContextMenu",
                "implHandler": [
                    "",
                    "//RHEVM VM Grid Right Click Menu 호출",
                    "",
                    "if(RHEVMConstants.writeMenuAuth == false) {",
                    "    return;",
                    "}",
                    "",
                    "var position = e.getXY();",
                    "e.stopEvent();",
                    "",
                    "RHEVMConstants.childActionRow = record;",
                    "",
                    "var menu = RHEVMConstants.rhevmVMContextMenu;",
                    "var status = record.get('status');",
                    "",
                    "menu.items.each(function( item ) {",
                    "",
                    "    if(status == 'up') {",
                    "",
                    "        if(item.text == 'Start')\t\t\t\titem.setDisabled(true);",
                    "        else if(item.text == 'Stop')\t\t\titem.setDisabled(false);",
                    "        else if(item.text == 'Shutdown')\t\titem.setDisabled(false);",
                    "        else if(item.text == 'Remove')\t\t\titem.setDisabled(true);",
                    "        else if(item.text == 'Export')\t\t\titem.setDisabled(true);",
                    "        else if(item.text == 'Make Template')\titem.setDisabled(true);",
                    "",
                    "    } else if(status == 'down') {",
                    "",
                    "        if(item.text == 'Start')\t\t\t\titem.setDisabled(false);",
                    "        else if(item.text == 'Stop')\t\t\titem.setDisabled(true);",
                    "        else if(item.text == 'Shutdown')\t\titem.setDisabled(true);",
                    "        else if(item.text == 'Remove')\t\t\titem.setDisabled(false);",
                    "        else if(item.text == 'Export')\t\t\titem.setDisabled(false);",
                    "        else if(item.text == 'Make Template')\titem.setDisabled(false);",
                    "",
                    "    } else {",
                    "        item.setDisabled(true);",
                    "    }",
                    "",
                    "});",
                    "",
                    "menu.showAt(position);"
                ],
                "name": "beforeitemcontextmenu",
                "scope": "me"
            },
            "designerId": "1b83a125-6744-43d5-8dea-f4acacae4b13"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmTemplateGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onRhevmTemplateGridSelect",
                "implHandler": [
                    "",
                    "//RHEVM Template 상세 조회",
                    "",
                    "if(RHEVMConstants.childSelectRow == null || RHEVMConstants.childSelectRow.get(\"templateId\") != record.get(\"templateId\")) {",
                    "",
                    "    RHEVMConstants.childSelectRow = record;",
                    "",
                    "    this.selectRhevmChildGrid('template');",
                    "}",
                    ""
                ],
                "name": "itemclick",
                "scope": "me"
            },
            "designerId": "33c04ce4-a288-4fcd-9152-d8766fedd98c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "init"
                ],
                "fn": "searchHypervisor",
                "implHandler": [
                    "",
                    "//RHEVM List 조회",
                    "",
                    "if(init) {",
                    "    Ext.getCmp(\"hypervisorGrid\").reconfigure(Ext.getCmp(\"hypervisorGrid\").store, Ext.getCmp(\"hypervisorGrid\").initialConfig.columns);",
                    "",
                    "    this.setRhevmMenuAuth();",
                    "}",
                    "",
                    "RHEVMConstants.selectRow = null;",
                    "RHEVMConstants.childSelectRow = null;",
                    "",
                    "Ext.getCmp(\"hypervisorGrid\").getStore().load();",
                    "",
                    "var detailPanel = Ext.getCmp(\"rhevmDetailPanel\");",
                    "detailPanel.layout.setActiveItem(0);"
                ]
            },
            "designerId": "a1a27b99-e094-4625-b3f5-b4a9bf158251"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "selectHypervisorGrid",
                "implHandler": [
                    "",
                    "//RHEVM Grid Select",
                    "var detailPanel = Ext.getCmp(\"rhevmDetailPanel\");",
                    "detailPanel.layout.setActiveItem(1);",
                    "",
                    "Ext.getCmp(\"rhevmTabPanel\").setActiveTab(0);",
                    "",
                    "Ext.getCmp(\"searchRhevmVMName\").setRawValue(\"\");",
                    "Ext.getCmp(\"searchRhevmTemplateName\").setRawValue(\"\");",
                    "",
                    "this.searchRhevmChildGrid();",
                    ""
                ]
            },
            "designerId": "c4c459a0-4f68-4852-8189-0d312f349b7f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "type"
                ],
                "fn": "showRhevmWindow",
                "implHandler": [
                    "var rhevmWindow = Ext.create(\"widget.RegRhevmWindow\");",
                    "rhevmWindow.show();",
                    "",
                    "if(type == 'edit') {",
                    "",
                    "    rhevmWindow.setTitle(\"Edit RHEVM\");",
                    "",
                    "    var rhevmForm = Ext.getCmp(\"rhevmForm\");",
                    "",
                    "    rhevmForm.getForm().waitMsgTarget = rhevmForm.getEl();",
                    "",
                    "    rhevmForm.getForm().load({",
                    "        params : {",
                    "            hypervisorId : RHEVMConstants.actionRow.get(\"hypervisorId\")",
                    "        }",
                    "        ,url : GLOBAL.urlPrefix + \"hypervisor/selectHypervisor\"",
                    "        ,waitMsg:'Loading...'",
                    "        ,success: function(form, action) {",
                    "",
                    "            var password = form.findField('rhevmPassword').getValue();",
                    "",
                    "            form.findField('confirmPasswd').setRawValue(password);",
                    "        }",
                    "    });",
                    "",
                    "}",
                    "",
                    ""
                ]
            },
            "designerId": "36a23d42-fe6b-4dde-bc5e-cfdf01bf13be"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deleteRhevm",
                "implHandler": [
                    "",
                    "Ext.MessageBox.confirm('Confirm', '삭제 하시겠습니까?', function(btn){",
                    "",
                    "    if(btn == \"yes\"){",
                    "",
                    "        Ext.Ajax.request({",
                    "            url: GLOBAL.urlPrefix + \"hypervisor/deleteHypervisor\",",
                    "            params : {",
                    "                hypervisorId : RHEVMConstants.actionRow.get(\"hypervisorId\")",
                    "            },",
                    "            disableCaching : true,",
                    "            waitMsg: 'Delete RHEVM...',",
                    "            success: function(response){",
                    "                var msg = Ext.JSON.decode(response.responseText).msg;",
                    "                Ext.MessageBox.alert('알림', msg);",
                    "",
                    "                RHEVMConstants.selectRow = null;",
                    "",
                    "                Ext.getCmp(\"hypervisorGrid\").getStore().reload();",
                    "                Ext.getCmp(\"rhevmDetailPanel\").layout.setActiveItem(0);",
                    "",
                    "            }",
                    "        });",
                    "    }",
                    "",
                    "});",
                    ""
                ]
            },
            "designerId": "badb64bd-3419-4f3e-aec2-5d802ae1dabe"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "grid_id",
                    "pagingType"
                ],
                "fn": "searchRhevmChildGrid",
                "implHandler": [
                    "",
                    "//RHEVM Detail Tab 조회",
                    "",
                    "RHEVMConstants.childSelectRow = null;",
                    "",
                    "var detailDPanel = Ext.getCmp(\"rhevmTabDetailPanel\");",
                    "detailDPanel.layout.setActiveItem(0);",
                    "detailDPanel.collapse();",
                    "",
                    "if(grid_id == null) {",
                    "",
                    "    RHEVMConstants.page = 1;",
                    "    Ext.getCmp(\"vmPagingLeftBtn\").setDisabled(false);",
                    "    Ext.getCmp(\"vmPagingLabel\").setText(\"0\");",
                    "    Ext.getCmp(\"vmPagingRightBtn\").setDisabled(false);",
                    "",
                    "    //Virtual Machines Data Loading",
                    "    var vmGrid = Ext.getCmp('rhevmVMGrid');",
                    "    vmGrid.reconfigure(vmGrid.store, vmGrid.initialConfig.columns);",
                    "    vmGrid.getStore().removeAll();",
                    "",
                    "    vmGrid.getStore().load({",
                    "        params:{",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\")",
                    "        }",
                    "    });",
                    "",
                    "} else {",
                    "",
                    "    var searchName = '';",
                    "    if(grid_id == 'rhevmVMGrid') {",
                    "        searchName = Ext.getCmp(\"searchRhevmVMName\").getRawValue();",
                    "    } else {",
                    "        searchName = Ext.getCmp(\"searchRhevmTemplateName\").getRawValue();",
                    "    }",
                    "",
                    "    if(pagingType == 'left') {",
                    "        RHEVMConstants.page--;",
                    "    } else if(pagingType == 'right') {",
                    "        RHEVMConstants.page++;",
                    "    }",
                    "",
                    "    var grid = Ext.getCmp(grid_id);",
                    "    grid.getStore().removeAll();",
                    "",
                    "    grid.getStore().load({",
                    "        params:{",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            name : searchName,",
                    "            start : ((RHEVMConstants.page-1)*100 + 1)",
                    "        }",
                    "    });",
                    "",
                    "}"
                ]
            },
            "designerId": "088debd5-3032-4ff9-bc95-97e9e48353d2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showTemplateWindow",
                "implHandler": [
                    "",
                    "//Template 생성 팝업 호출",
                    "",
                    "var templateWindow = Ext.create(\"widget.RegTemplateWindow\");",
                    "",
                    "templateWindow.show();",
                    "",
                    "var templateForm = Ext.getCmp(\"templateForm\");",
                    "templateForm.getForm().findField(\"hypervisorId\").setRawValue(RHEVMConstants.selectRow.get(\"hypervisorId\"));",
                    "templateForm.getForm().findField(\"vmId\").setRawValue(RHEVMConstants.childActionRow.get(\"vmId\"));"
                ]
            },
            "designerId": "8ae67d63-ac7d-4aba-89ee-be6544f2c220"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#hypervisorGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onHypervisorGridBeforeItemContextMenu",
                "implHandler": [
                    "",
                    "//RHEVM Right Click Menu 호출",
                    "",
                    "if(RHEVMConstants.writeMenuAuth == false) {",
                    "    return;",
                    "}",
                    "",
                    "var position = e.getXY();",
                    "e.stopEvent();",
                    "",
                    "RHEVMConstants.actionRow = record;",
                    "",
                    "RHEVMConstants.rhevmContextMenu.showAt(position);"
                ],
                "name": "beforeitemcontextmenu",
                "scope": "me"
            },
            "designerId": "58850b1c-1b48-479e-8105-cfc352d4ed76"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#searchRhevmVMName",
                "designer|targetType": "Ext.form.field.Text",
                "fn": "onSearchRhevmVMNameKeydown",
                "implHandler": [
                    "",
                    "//RHEVM VM Name Search",
                    "if(e.getKey() == e.ENTER){",
                    "    RHEVMConstants.page = 1;",
                    "    this.searchRhevmChildGrid('rhevmVMGrid');",
                    "}"
                ],
                "name": "keydown",
                "scope": "me"
            },
            "designerId": "36dd9dd5-b0be-4700-b8b0-316c3c050b02"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#searchRhevmTemplateName",
                "designer|targetType": "Ext.form.field.Text",
                "fn": "onSearchRhevmTemplateNameKeydown",
                "implHandler": [
                    "//RHEVM Template Name Search",
                    "if(e.getKey() == e.ENTER){",
                    "    RHEVMConstants.page = 1;",
                    "    this.searchRhevmChildGrid('rhevmTemplateGrid');",
                    "}"
                ],
                "name": "keydown",
                "scope": "me"
            },
            "designerId": "152daea6-c2a0-45ee-afdf-b7be5076a08c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "status"
                ],
                "fn": "controlVMStatus",
                "implHandler": [
                    "",
                    "//VM 제어",
                    "",
                    "var controlUrl = '';",
                    "",
                    "if(status == 'Start') {",
                    "",
                    "    controlUrl = 'rhevm/vms/start';",
                    "",
                    "} else if(status == 'Stop') {",
                    "",
                    "    controlUrl = 'rhevm/vms/stop';",
                    "",
                    "} else if(status == 'Shutdown') {",
                    "",
                    "    controlUrl = 'rhevm/vms/shutdown';",
                    "",
                    "} else if(status == 'Remove') {",
                    "",
                    "    controlUrl = 'rhevm/vms/remove';",
                    "",
                    "} else if(status == 'Export') {",
                    "",
                    "    controlUrl = 'rhevm/vms/export';",
                    "",
                    "}",
                    "",
                    "Ext.MessageBox.confirm('Confirm', 'VM을 ' + status + '하시겠습니까?', function(btn){",
                    "",
                    "    if(btn == \"yes\"){",
                    "",
                    "        Ext.Ajax.request({",
                    "            url: GLOBAL.urlPrefix + controlUrl,",
                    "            params : {",
                    "                hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "                vmId : RHEVMConstants.childActionRow.get(\"vmId\")",
                    "            },",
                    "            disableCaching : true,",
                    "            waitMsg: status + ' VM...',",
                    "            success: function(response){",
                    "                var msg = Ext.JSON.decode(response.responseText).msg;",
                    "                Ext.MessageBox.alert('알림', msg);",
                    "",
                    "                Ext.getCmp('rhevmVMGrid').getStore().reload();",
                    "            }",
                    "        });",
                    "    }",
                    "",
                    "});"
                ]
            },
            "designerId": "35727a15-c9ec-4c71-97b8-db3b457623ce"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deleteTemplate",
                "implHandler": [
                    "",
                    "//Template Delete",
                    "",
                    "Ext.MessageBox.confirm('Confirm', '삭제 하시겠습니까?', function(btn){",
                    "",
                    "    if(btn == \"yes\"){",
                    "",
                    "        Ext.Ajax.request({",
                    "            url: GLOBAL.urlPrefix + \"rhevm/templates/remove\",",
                    "            params : {",
                    "                hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "                templateId : RHEVMConstants.childActionRow.get(\"templateId\")",
                    "            },",
                    "            disableCaching : true,",
                    "            waitMsg: 'Delete Template...',",
                    "            success: function(response){",
                    "                var msg = Ext.JSON.decode(response.responseText).msg;",
                    "                Ext.MessageBox.alert('알림', msg);",
                    "",
                    "                Ext.getCmp('rhevmTemplateGrid').getStore().reload();",
                    "",
                    "            }",
                    "        });",
                    "    }",
                    "",
                    "});",
                    ""
                ]
            },
            "designerId": "2af50313-ed54-4a0d-bd22-76871c65be86"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmTemplateGrid",
                "designer|targetType": "Ext.grid.Panel",
                "fn": "onRhevmTemplateGridBeforeItemContextMenu",
                "implHandler": [
                    "//RHEVM Template Right Click Menu 호출",
                    "",
                    "if(RHEVMConstants.writeMenuAuth == false) {",
                    "    return;",
                    "}",
                    "",
                    "var position = e.getXY();",
                    "e.stopEvent();",
                    "",
                    "RHEVMConstants.childActionRow = record;",
                    "",
                    "RHEVMConstants.rhevmTemplateContextMenu.showAt(position);"
                ],
                "name": "beforeitemcontextmenu",
                "scope": "me"
            },
            "designerId": "eb436f94-8c83-4a49-b374-c4717c299b89"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "type"
                ],
                "fn": "selectRhevmChildGrid",
                "implHandler": [
                    "",
                    "//RHEVM VM 상세 조회",
                    "var detailTab = Ext.getCmp(\"rhevmTabDetailPanel\");",
                    "detailTab.expand();",
                    "",
                    "detailTab.layout.setActiveItem(1);",
                    "",
                    "Ext.getCmp(\"rhevmTabDetailTabPanel\").setActiveTab(0);",
                    "",
                    "this.searchRhevmChildDetailTab(type, \"General\");"
                ]
            },
            "designerId": "1aad9cf0-04a9-426c-987d-b9cb65b0b4bb"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "type",
                    "tabTitle"
                ],
                "fn": "searchRhevmChildDetailTab",
                "implHandler": [
                    "",
                    "//RHEVM VM 상세 정보 조회(Tab 별)",
                    "var searchParam, searchUrl;",
                    "",
                    "if(tabTitle == \"General\") {",
                    "",
                    "    //General Data Loading",
                    "    var generalform = Ext.getCmp(\"rhevmGeneralForm\");",
                    "",
                    "    generalform.getForm().reset();",
                    "",
                    "    if(type == 'vm') {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/vms/info\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            vmId : RHEVMConstants.childSelectRow.get(\"vmId\")",
                    "        };",
                    "",
                    "        generalform.getForm().findField('template').show();",
                    "        generalform.getForm().findField('type').hide();",
                    "",
                    "    } else {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/templates/info\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            templateId : RHEVMConstants.childSelectRow.get(\"templateId\")",
                    "        };",
                    "",
                    "        generalform.getForm().findField('template').hide();",
                    "        generalform.getForm().findField('type').show();",
                    "",
                    "    }",
                    "",
                    "    generalform.getForm().waitMsgTarget = generalform.getEl();",
                    "",
                    "    generalform.getForm().load({",
                    "        params : searchParam",
                    "        ,url : searchUrl",
                    "        ,waitMsg:'Loading...'",
                    "        ,success: function(form, action) {",
                    "            var socket = form.findField('sockets').getRawValue();",
                    "            var cores = form.findField('cores').getRawValue();",
                    "",
                    "            form.findField('core_socket').setRawValue((socket*cores) + ' (' + socket + ' Socket(s), ' + cores + ' Core(s) per Socket)');",
                    "        }",
                    "    });",
                    "",
                    "} else if(tabTitle == \"Network Interfaces\") {",
                    "",
                    "    //Network Interfaces Data Loading",
                    "    var networkGrid = Ext.getCmp('rhevmNetworkGrid');",
                    "    networkGrid.reconfigure(networkGrid.store, networkGrid.initialConfig.columns);",
                    "",
                    "    if(type == 'vm') {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/vms/nics\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            vmId : RHEVMConstants.childSelectRow.get(\"vmId\")",
                    "        };",
                    "",
                    "    } else {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/templates/nics\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            templateId : RHEVMConstants.childSelectRow.get(\"templateId\")",
                    "        };",
                    "",
                    "        networkGrid.getView().headerCt.getGridColumns()[6].setVisible(false);",
                    "        networkGrid.getView().headerCt.getGridColumns()[6].hideable = false;",
                    "    }",
                    "",
                    "    networkGrid.getStore().getProxy().url = searchUrl;",
                    "    networkGrid.getStore().load({",
                    "        params:searchParam",
                    "    });",
                    "",
                    "} else if(tabTitle == \"Disks\") {",
                    "",
                    "    //Disk Data Loading",
                    "    var diskGrid = Ext.getCmp('rhevmDiskGrid');",
                    "    diskGrid.reconfigure(diskGrid.store, diskGrid.initialConfig.columns);",
                    "",
                    "    if(type == 'vm') {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/vms/disks\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            vmId : RHEVMConstants.childSelectRow.get(\"vmId\")",
                    "        };",
                    "",
                    "    } else {",
                    "",
                    "        searchUrl = GLOBAL.urlPrefix + \"rhevm/templates/disks\";",
                    "        searchParam = {",
                    "            hypervisorId : RHEVMConstants.selectRow.get(\"hypervisorId\"),",
                    "            templateId : RHEVMConstants.childSelectRow.get(\"templateId\")",
                    "        };",
                    "",
                    "        diskGrid.getView().headerCt.getGridColumns()[1].setVisible(false);",
                    "        diskGrid.getView().headerCt.getGridColumns()[1].hideable = false;",
                    "",
                    "    }",
                    "",
                    "    diskGrid.getStore().getProxy().url = searchUrl;",
                    "    diskGrid.getStore().load({",
                    "        params:searchParam",
                    "    });",
                    "",
                    "}"
                ]
            },
            "designerId": "80d97f2a-cb5e-4782-aa4a-cefd03052377"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#rhevmTabDetailTabPanel",
                "designer|targetType": "Ext.tab.Panel",
                "fn": "onRhevmTabDetailTabPanelTabChange",
                "implHandler": [
                    "//RHEVM Detail Child Tab Change",
                    "",
                    "var type;",
                    "",
                    "if(Ext.getCmp(\"rhevmTabPanel\").getActiveTab().title == \"Virtual Machines\"){",
                    "    type = \"vm\";",
                    "} else {",
                    "    type = \"template\";",
                    "}",
                    "",
                    "this.searchRhevmChildDetailTab(type, newCard.title);",
                    ""
                ],
                "name": "tabchange",
                "scope": "me"
            },
            "designerId": "491793bc-fd41-40ff-9c19-820027bce379"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "popCreateInstance",
                "implHandler": [
                    "",
                    "//Instance 생성 팝업 호출(Template 지정)",
                    "",
                    "var regInstanceWindow = Ext.create(\"widget.RegInstanceWindow\");",
                    "regInstanceWindow.show();",
                    "",
                    "var form = Ext.getCmp('instanceForm').getForm();",
                    "",
                    "form.findField(\"hypervisorId\").setValue(RHEVMConstants.selectRow.get(\"hypervisorId\"));",
                    "form.findField(\"displayHypervisor\").setValue(RHEVMConstants.selectRow.get(\"rhevmName\"));",
                    "form.findField(\"template\").setValue(RHEVMConstants.childActionRow.get(\"templateId\"));",
                    "form.findField(\"displayTemplate\").setValue(RHEVMConstants.childActionRow.get(\"name\"));",
                    "form.findField(\"memory\").setValue(RHEVMConstants.childActionRow.get(\"memory\"));",
                    "form.findField(\"sockets\").setValue(RHEVMConstants.childActionRow.get(\"sockets\"));",
                    "form.findField(\"dataCenter\").setValue(RHEVMConstants.childActionRow.get(\"dataCenter\")+\"::\"+RHEVMConstants.childActionRow.get(\"cluster\"));",
                    "form.findField(\"cores\").setValue(\"1\");",
                    "",
                    "form.findField(\"hypervisorId\").hide();",
                    "form.findField(\"template\").hide();",
                    "form.findField(\"displayHypervisor\").show();",
                    "form.findField(\"displayTemplate\").show();"
                ]
            },
            "designerId": "8a5b8e78-b26b-47d8-9216-f885558e96d9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "setRhevmMenuAuth",
                "implHandler": [
                    "",
                    "if(RHEVMConstants.writeMenuAuth) {",
                    "",
                    "    Ext.getCmp(\"hypervisorGrid\").getView().headerCt.getGridColumns()[11].setVisible(true);",
                    "    Ext.getCmp(\"hypervisorGrid\").getView().headerCt.getGridColumns()[12].setVisible(true);",
                    "",
                    "} else {",
                    "",
                    "    Ext.getCmp(\"hypervisorGrid\").getView().headerCt.getGridColumns()[11].setVisible(false);",
                    "    Ext.getCmp(\"hypervisorGrid\").getView().headerCt.getGridColumns()[12].setVisible(false);",
                    "",
                    "}"
                ]
            },
            "designerId": "94fe684d-0937-4798-9392-a5f028ee9cc0"
        }
    ]
}